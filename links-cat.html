<html>
<body>

<p id="links"></p>


<script>
/*Site that stores JSON file*/
var jsonsite="https://david-krause.github.io/favorite-links/links.json";
var jsnhttp = new XMLHttpRequest();

/*perform this function one page is loaded*/
jsnhttp.onreadystatechange = function() {
  if (this.status == 200 && this.readyState == 4) {

		/*declare variables and parse JSON file*/
   var i, n, z, tgsarr=[], tgsurlarr=[], jsnObj = JSON.parse(this.responseText);
		/*loop through each site (i)*/
		for(i in jsnObj){
			/*loop through each tag (n) in site (i)*/
			for(n in jsnObj[i].tags){
			/******check to see if tag already exists in array*/
				/*this function searches for the current category in tgsarr*/
				function fndvar(tgsarrval){return tgsarrval == jsnObj[i].tags[n]};
				
				/*if the current category is not found in the tgsarr variable (less than 0) then add it to the array*/
				/*if the current category is found in the tgsarr variable (>=0) then add the url to the existing category*/
				/*note: the tgsarr is a 1 dimension array used for searching to see if the category already is in the array*/
				if(tgsarr.findIndex(fndvar)<0){
					var z = tgsarr.push(jsnObj[i].tags[n]);
					/*create 2 dimension array of tag and url*/
					tgsurlarr.push(["<h3>" + tgsarr[z-1] + "</h3>", "<a target=_blank href=" + jsnObj[i].url + ">" + jsnObj[i].title + "</a><br>"]);
				}else{
					var z = tgsarr.findIndex(fndvar);
					tgsurlarr[z].push("<a target=_blank href=" + jsnObj[i].url + ">" + jsnObj[i].title + "</a><br>");
				};
			}
		}
		/*Sort tagsurl array*/
		tgsurlarr.sort();
		
		/*lnks variable is set to the HTML paragraph*/
	  	/*use join method to remove commas from array*/
		document.getElementById("links").innerHTML = tgsurlarr.join("","");
	}	
};

/*call site to get JSON data*/
jsnhttp.open("GET", jsonsite,true);
jsnhttp.send();

</script>
</body>
</html>
